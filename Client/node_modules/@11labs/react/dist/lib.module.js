import{useRef as n,useState as e,useEffect as t}from"react";import{Conversation as r}from"@11labs/client";export{postOverallFeedback}from"@11labs/client";function u(){return u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u.apply(null,arguments)}var o=["micMuted","volume"];function c(c){void 0===c&&(c={});var l=c.micMuted,i=c.volume,a=function(n,e){if(null==n)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.includes(r))continue;t[r]=n[r]}return t}(c,o),s=n(null),v=n(null),d=e("disconnected"),f=d[0],m=d[1],g=e(!1),p=g[0],h=g[1],y=e("listening"),b=y[0],F=y[1];return t(function(){var n;void 0!==l&&(null==s||null==(n=s.current)||n.setMicMuted(l))},[l]),t(function(){var n;void 0!==i&&(null==s||null==(n=s.current)||n.setVolume({volume:i}))},[i]),t(function(){return function(){var n;null==(n=s.current)||n.endSession()}},[]),{startSession:function(n){try{var e,t,o=function(e){return t?e:function(e,t){try{var o=(v.current=r.startSession(u({},null!=a?a:{},null!=n?n:{},{onModeChange:function(n){F(n.mode)},onStatusChange:function(n){m(n.status)},onCanSendFeedbackChange:function(n){h(n.canSendFeedback)}})),Promise.resolve(v.current).then(function(n){return s.current=n,void 0!==l&&s.current.setMicMuted(l),void 0!==i&&s.current.setVolume({volume:i}),s.current.getId()}))}catch(n){return t(!0,n)}return o&&o.then?o.then(t.bind(null,!1),t.bind(null,!0)):t(!1,o)}(0,function(n,e){if(v.current=null,n)throw e;return e})};if(null!=(e=s.current)&&e.isOpen())return Promise.resolve(s.current.getId());var c=function(){if(v.current)return Promise.resolve(v.current).then(function(n){var e=n.getId();return t=1,e})}();return Promise.resolve(c&&c.then?c.then(o):o(c))}catch(n){return Promise.reject(n)}},endSession:function(){try{var n=s.current;return s.current=null,Promise.resolve(null==n?void 0:n.endSession()).then(function(){})}catch(n){return Promise.reject(n)}},setVolume:function(n){var e;null==(e=s.current)||e.setVolume({volume:n.volume})},getInputByteFrequencyData:function(){var n;return null==(n=s.current)?void 0:n.getInputByteFrequencyData()},getOutputByteFrequencyData:function(){var n;return null==(n=s.current)?void 0:n.getOutputByteFrequencyData()},getInputVolume:function(){var n,e;return null!=(n=null==(e=s.current)?void 0:e.getInputVolume())?n:0},getOutputVolume:function(){var n,e;return null!=(n=null==(e=s.current)?void 0:e.getOutputVolume())?n:0},sendFeedback:function(n){var e;null==(e=s.current)||e.sendFeedback(n)},getId:function(){var n;return null==(n=s.current)?void 0:n.getId()},status:f,canSendFeedback:p,micMuted:l,isSpeaking:"speaking"===b}}export{c as useConversation};
//# sourceMappingURL=lib.module.js.map
