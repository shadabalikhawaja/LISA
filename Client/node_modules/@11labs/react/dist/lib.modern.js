import{useRef as e,useState as n,useEffect as t}from"react";import{Conversation as r}from"@11labs/client";export{postOverallFeedback}from"@11labs/client";function u(){return u=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},u.apply(null,arguments)}const l=["micMuted","volume"];function a(a={}){const{micMuted:c,volume:o}=a,i=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.includes(r))continue;t[r]=e[r]}return t}(a,l),s=e(null),d=e(null),[v,m]=n("disconnected"),[g,p]=n(!1),[f,y]=n("listening");return t(()=>{var e;void 0!==c&&(null==s||null==(e=s.current)||e.setMicMuted(c))},[c]),t(()=>{var e;void 0!==o&&(null==s||null==(e=s.current)||e.setVolume({volume:o}))},[o]),t(()=>()=>{var e;null==(e=s.current)||e.endSession()},[]),{startSession:async e=>{var n;if(null!=(n=s.current)&&n.isOpen())return s.current.getId();if(d.current)return(await d.current).getId();try{return d.current=r.startSession(u({},null!=i?i:{},null!=e?e:{},{onModeChange:({mode:e})=>{y(e)},onStatusChange:({status:e})=>{m(e)},onCanSendFeedbackChange:({canSendFeedback:e})=>{p(e)}})),s.current=await d.current,void 0!==c&&s.current.setMicMuted(c),void 0!==o&&s.current.setVolume({volume:o}),s.current.getId()}finally{d.current=null}},endSession:async()=>{const e=s.current;s.current=null,await(null==e?void 0:e.endSession())},setVolume:({volume:e})=>{var n;null==(n=s.current)||n.setVolume({volume:e})},getInputByteFrequencyData:()=>{var e;return null==(e=s.current)?void 0:e.getInputByteFrequencyData()},getOutputByteFrequencyData:()=>{var e;return null==(e=s.current)?void 0:e.getOutputByteFrequencyData()},getInputVolume:()=>{var e,n;return null!=(e=null==(n=s.current)?void 0:n.getInputVolume())?e:0},getOutputVolume:()=>{var e,n;return null!=(e=null==(n=s.current)?void 0:n.getOutputVolume())?e:0},sendFeedback:e=>{var n;null==(n=s.current)||n.sendFeedback(e)},getId:()=>{var e;return null==(e=s.current)?void 0:e.getId()},status:v,canSendFeedback:g,micMuted:c,isSpeaking:"speaking"===f}}export{a as useConversation};
//# sourceMappingURL=lib.modern.js.map
